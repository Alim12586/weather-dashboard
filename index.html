<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather Dashboard</title>
  <style>
    body {
      background: #f7f7fa;
      font-family: 'Segoe UI', Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      height: 100vh;
      margin: 0;
    }
    .container {
      margin-top: 40px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.10);
      padding: 32px 26px 24px 26px;
      width: 340px;
    }
    h2 {
      text-align: center;
      color: #333;
      margin-bottom: 18px;
    }
    .input-group {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
    }
    #city {
      flex: 1;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
      outline: none;
    }
    #fetchBtn {
      padding: 10px 18px;
      background: #4caf50;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    #fetchBtn:hover {
      background: #388e3c;
    }
    .weather-info {
      margin-top: 16px;
      background: #f3f8fc;
      border-radius: 8px;
      padding: 18px;
      min-height: 130px;
      text-align: center;
      color: #222;
    }
    .weather-info img {
      vertical-align: middle;
      margin-right: 8px;
    }
    .error {
      color: #d32f2f;
      margin-top: 12px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Weather Dashboard</h2>
    <div class="input-group">
      <input type="text" id="city" placeholder="Enter city name..." />
      <button id="fetchBtn">Get Weather</button>
    </div>
    <div id="weather" class="weather-info"></div>
    <div id="error" class="error"></div>
  </div>
  <script>
    // Uses Open-Meteo API (no key required): https://open-meteo.com/
    // For city -> coordinates, uses GeoNames API (public demo, limited, you can swap for another provider if needed)
    async function getCoords(city) {
      const url = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data && data.results && data.results.length > 0) {
          return {
            lat: data.results[0].latitude,
            lon: data.results[0].longitude,
            name: data.results[0].name,
            country: data.results[0].country
          };
        }
        return null;
      } catch {
        return null;
      }
    }
    async function getWeather(lat, lon) {
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data && data.current_weather) {
          return data.current_weather;
        }
        return null;
      } catch {
        return null;
      }
    }
    document.getElementById("fetchBtn").onclick = async function() {
      const city = document.getElementById("city").value.trim();
      const weatherDiv = document.getElementById("weather");
      const errorDiv = document.getElementById("error");
      weatherDiv.innerHTML = "";
      errorDiv.textContent = "";
      if (!city) {
        errorDiv.textContent = "Please enter a city name.";
        return;
      }
      weatherDiv.innerHTML = "Loading...";
      const coords = await getCoords(city);
      if (!coords) {
        weatherDiv.innerHTML = "";
        errorDiv.textContent = "City not found.";
        return;
      }
      const weather = await getWeather(coords.lat, coords.lon);
      if (!weather) {
        weatherDiv.innerHTML = "";
        errorDiv.textContent = "Unable to fetch weather data.";
        return;
      }
      // Weather code mapping for icon (simplified)
      const iconMap = {
        0: "☀️", 1: "🌤️", 2: "⛅", 3: "☁️", 45: "🌫️", 48: "🌫️",
        51: "🌦️", 53: "🌦️", 55: "🌦️", 56: "🌧️", 57: "🌧️",
        61: "🌧️", 63: "🌧️", 65: "🌧️", 66: "🌨️", 67: "🌨️",
        71: "🌨️", 73: "🌨️", 75: "🌨️", 77: "🌨️", 80: "🌧️",
        81: "🌧️", 82: "🌧️", 85: "❄️", 86: "❄️", 95: "⛈️",
        96: "⛈️", 99: "⛈️"
      };
      const icon = iconMap[weather.weathercode] || "";
      weatherDiv.innerHTML = `
        <div>
          <span style="font-size:2em;">${icon}</span>
        </div>
        <div style="margin:6px 0 0 0;font-size:18px;">
          ${coords.name}, ${coords.country}
        </div>
        <div style="margin-top:8px;">
          <strong>Temperature:</strong> ${weather.temperature}°C
        </div>
        <div>
          <strong>Windspeed:</strong> ${weather.windspeed} km/h
        </div>
        <div>
          <strong>Weather Code:</strong> ${weather.weathercode}
        </div>
      `;
    };
  </script>
</body>
</html>
